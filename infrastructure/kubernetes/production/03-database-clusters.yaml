# 5. Neo4j Enterprise Cluster
apiVersion: neo4j.com/v1alpha1
kind: Neo4jCluster
metadata:
  name: neo4j-cluster
  namespace: skysentinel-production
spec:
  name: neo4j
  edition: enterprise
  members: 3
  resources:
    cpu: "4"
    memory: "8Gi"
    storage: "100Gi"
  auth:
    secretName: neo4j-auth-secret
  volumeMounts:
    - name: backups
      mountPath: /backups
      readOnly: false
  backup:
    enabled: true
    schedule: "0 2 * * *"  # Daily at 2 AM
    retention: 30d
  monitoring:
    prometheus:
      enabled: true

---
# 6. Redis Cluster
apiVersion: redis.redis.opstreelabs.in/v1beta1
kind: Redis
metadata:
  name: redis-cluster
  namespace: skysentinel-production
spec:
  mode: cluster
  cluster:
    replicas: 1
    nodes: 3
  storage:
    volumeClaimTemplate:
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 20Gi
  kubernetesConfig:
    image: redis:7.2-alpine
    resources:
      requests:
        memory: "1Gi"
        cpu: "500m"
      limits:
        memory: "2Gi"
        cpu: "1"
  redisExporter:
    enabled: true
